(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"887c":function(e,l,t){"use strict";t.r(l);var a=function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("q-page",{},[t("div",{staticStyle:{"max-width":"900px","margin-left":"auto","margin-right":"auto"}},[t("div",{staticStyle:{height:"50px"}}),t("div",{staticClass:"q-ma-md"},[t("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[t("q-input",{attrs:{label:"News Name 報刊名稱",placeholder:""},scopedSlots:e._u([0!==e.nameNews.length?{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(l){e.nameNews=""}}})]},proxy:!0}:null],null,!0),model:{value:e.nameNews,callback:function(l){e.nameNews=l},expression:"nameNews"}}),t("q-input",{attrs:{label:"Title 報道標題 可使用正則表達式「Regex Available」",placeholder:""},scopedSlots:e._u([0!==e.title.length?{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(l){e.title=""}}})]},proxy:!0}:null],null,!0),model:{value:e.title,callback:function(l){e.title=l},expression:"title"}}),t("q-input",{attrs:{label:"Content 報道正文 可使用正則表達式「Regex Available」",placeholder:""},scopedSlots:e._u([0!==e.content.length?{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(l){e.content=""}}})]},proxy:!0}:null],null,!0),model:{value:e.content,callback:function(l){e.content=l},expression:"content"}}),t("q-input",{attrs:{label:"Locale 報道區域",placeholder:""},scopedSlots:e._u([0!==e.locale.length?{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(l){e.locale=""}}})]},proxy:!0}:null],null,!0),model:{value:e.locale,callback:function(l){e.locale=l},expression:"locale"}}),t("div",[t("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary",disable:e.isSubmitDisabled}}),t("q-ajax-bar",{ref:"bar",attrs:{position:"bottom",color:"primary",size:"10px","skip-hijack":""}})],1)],1)],1),e.isResultShow?t("div",{staticClass:"q-ma-md"},[t("q-table",{attrs:{title:"Result Data",dense:"",data:e.resultData,columns:e.resultColumns,"visible-columns":e.visibleColumns,"row-key":"link-href"},scopedSlots:e._u([{key:"top-right",fn:function(){return[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("q-item-label",{attrs:{header:""}},[e._v("Select Output / Display columns Below")]),t("q-toggle",{attrs:{val:"date",label:"Date"},model:{value:e.visibleColumns,callback:function(l){e.visibleColumns=l},expression:"visibleColumns"}}),t("q-toggle",{attrs:{val:"name",label:"News Name"},model:{value:e.visibleColumns,callback:function(l){e.visibleColumns=l},expression:"visibleColumns"}}),t("q-toggle",{attrs:{val:"locale",label:"Locale"},model:{value:e.visibleColumns,callback:function(l){e.visibleColumns=l},expression:"visibleColumns"}}),t("q-toggle",{attrs:{val:"description",label:"Description"},model:{value:e.visibleColumns,callback:function(l){e.visibleColumns=l},expression:"visibleColumns"}}),t("q-toggle",{attrs:{val:"title",label:"Title"},model:{value:e.visibleColumns,callback:function(l){e.visibleColumns=l},expression:"visibleColumns"}}),t("q-toggle",{attrs:{val:"content",label:"Content"},model:{value:e.visibleColumns,callback:function(l){e.visibleColumns=l},expression:"visibleColumns"}}),t("q-toggle",{attrs:{val:"url",label:"Url"},model:{value:e.visibleColumns,callback:function(l){e.visibleColumns=l},expression:"visibleColumns"}})],1),t("div",{staticClass:"col-4"},[t("q-item-label",{staticClass:"q-gutter-xs",attrs:{header:""}},[e._v("Select Output Type")]),t("q-btn-toggle",{attrs:{"no-caps":"",rounded:"","toggle-color":"green",color:"white","text-color":"primary",options:[{label:"CSV",value:"csv"},{label:"TEXT",value:"txt"}]},model:{value:e.outputType,callback:function(l){e.outputType=l},expression:"outputType"}}),t("div",{staticClass:"q-gutter-lg"},[t("q-input",{attrs:{label:"導出條目限制 if 0 output all",placeholder:"0"},model:{value:e.outputlimit,callback:function(l){e.outputlimit=l},expression:"outputlimit"}}),t("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":""},on:{click:e.exportTable}})],1)],1)])]},proxy:!0}],null,!1,1249789053)})],1):e._e()])])},n=[],o=t("c973"),s=t.n(o),i=t("a357"),c=t("c4e3"),r=t.n(c);const u=(e,l)=>{let t=void 0!==l?l(e):e;return t=void 0===t||null===t?"":String(t),t=t.split('"').join('""'),`"${t}"`};var m={data(){return{nameNews:"",title:"",content:"",locale:"",outputlimit:0,isSubmitDisabled:!1,isResultShow:!1,resultData:[],outputType:"csv",visibleColumns:["date","name","locale","description","title","content","url"],resultColumns:[{name:"date",label:"Date",align:"left",field:"date",sortable:!0},{name:"name",label:"News Name",align:"left",field:"name",sortable:!0},{name:"locale",label:"Locale",align:"left",field:"locale",sortable:!0},{name:"description",label:"Description",align:"left",field:"description",sortable:!0},{name:"title",label:"Title",align:"left",field:"title",sortable:!0},{name:"content",label:"Content",align:"left",field:"content",sortable:!0},{name:"url",label:"Url",align:"left",field:"url",sortable:!1}]}},methods:{onSubmit(){var e=this;return s()((function*(){console.info("[methods][onSubmit]");const l=e.$refs.bar;e.isSubmitDisabled=!0,l.start(),yield e.$http.get("/newsData",{params:{name:e.nameNews,title:e.title,content:e.content,locale:e.locale}}).then(t=>{"[]"===t.data?console.error("error"):(l.stop(),e.isSubmitDisabled=!1,e.isResultShow=!0,e.resultData=t.data)})}))()},exportTable(){const e=new r.a,l=[this.visibleColumns.map(e=>u(e))],t=this.resultData.map(e=>this.visibleColumns.map(l=>u(e[l])).join(",")),a=t.length,n=new Date,o=`${n.getFullYear()}${n.getMonth()}${n.getDate()}-${n.getHours()}${n.getMinutes()}${n.getSeconds()}`;let s=0;while(t.length>0){let n=[];for(let e=0;t.length>0&&e<Math.floor(a/this.outputlimit);++e)n.push(t.shift());switch(this.outputType){case"csv":n=l.concat(n).join("\r\n");break;case"txt":n=n.join("\r\n");break;default:n=l.concat(n).join("\r\n");break}e.file(`news-data-${s++}-${o}.`+this.outputType,n)}e.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}).then(e=>{const l=Object(i["a"])(`news-crawler-storage-export-${o}.zip`,e,"blob");!0!==l&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})})}},mounted(){}},p=m,b=t("2877"),d=t("9989"),v=t("0378"),g=t("27f9"),f=t("0016"),h=t("9c40"),C=t("7ea5"),w=t("eaac"),x=t("0170"),k=t("9564"),q=t("6a67"),y=t("eebe"),S=t.n(y),D=Object(b["a"])(p,a,n,!1,null,null,null);l["default"]=D.exports;S()(D,"components",{QPage:d["a"],QForm:v["a"],QInput:g["a"],QIcon:f["a"],QBtn:h["a"],QAjaxBar:C["a"],QTable:w["a"],QItemLabel:x["a"],QToggle:k["a"],QBtnToggle:q["a"]})}}]);