(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"887c":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("q-page",{},[l("div",{staticStyle:{"max-width":"900px","margin-left":"auto","margin-right":"auto"}},[l("div",{staticStyle:{height:"50px"}}),l("div",{staticClass:"q-ma-md"},[l("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[l("q-input",{attrs:{label:"News Name 報刊名稱",placeholder:""},scopedSlots:e._u([0!==e.nameNews.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.nameNews=""}}})]},proxy:!0}:null],null,!0),model:{value:e.nameNews,callback:function(t){e.nameNews=t},expression:"nameNews"}}),l("q-input",{attrs:{label:"Title 報道標題 可使用正則表達式「Regex Available」",placeholder:""},scopedSlots:e._u([0!==e.title.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.title=""}}})]},proxy:!0}:null],null,!0),model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),l("q-input",{attrs:{label:"Content 報道正文 可使用正則表達式「Regex Available」",placeholder:""},scopedSlots:e._u([0!==e.content.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.content=""}}})]},proxy:!0}:null],null,!0),model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),l("q-input",{attrs:{label:"Locale 報道區域",placeholder:""},scopedSlots:e._u([0!==e.locale.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.locale=""}}})]},proxy:!0}:null],null,!0),model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}}),l("div",[l("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary",disable:e.isSubmitDisabled}}),l("q-ajax-bar",{ref:"bar",attrs:{position:"bottom",color:"primary",size:"10px","skip-hijack":""}})],1)],1)],1),e.isResultShow?l("div",{staticClass:"q-ma-md"},[l("q-table",{attrs:{title:"Result Data",data:e.resultData,columns:e.resultColumns,"row-key":"link-href","rows-per-page-options":[0]},scopedSlots:e._u([{key:"top-right",fn:function(){return[l("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":""},on:{click:e.exportTable}})]},proxy:!0}],null,!1,1388069608)})],1):e._e()])])},n=[],o=l("c973"),i=l.n(o),s=l("a357");const r=(e,t)=>{let l=void 0!==t?t(e):e;return l=void 0===l||null===l?"":String(l),l=l.split('"').join('""'),`"${l}"`};var c={data(){return{nameNews:"",title:"",content:"",locale:"",isSubmitDisabled:!1,isResultShow:!1,resultData:[],resultColumns:[{name:"date",label:"Date",align:"left",field:"date",sortable:!0},{name:"name",label:"News Name",align:"left",field:"name",sortable:!0},{name:"locale",label:"Locale",align:"left",field:"locale",sortable:!0},{name:"description",label:"Description",align:"left",field:"description",sortable:!0},{name:"title",label:"Title",align:"left",field:"title",sortable:!0},{name:"content",label:"Content",align:"left",field:"content",sortable:!0},{name:"url",label:"Url",align:"left",field:"url",sortable:!1}]}},methods:{onSubmit(){var e=this;return i()((function*(){console.info("[methods][onSubmit]");const t=e.$refs.bar;e.isSubmitDisabled=!0,t.start(),yield e.$http.get("/newsData",{params:{name:e.nameNews,title:e.title,content:e.content,locale:e.locale}}).then(l=>{"[]"===l.data?console.error("error"):(t.stop(),e.isSubmitDisabled=!1,e.isResultShow=!0,e.resultData=l.data)})}))()},exportTable(){const e=[this.resultColumns.map(e=>r(e.label))].concat(this.resultData.map(e=>this.resultColumns.map(t=>r("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format)).join(","))).join("\r\n"),t=new Date,l=`${t.getFullYear()}${t.getMonth()}${t.getDate()}-${t.getHours()}${t.getMinutes()}${t.getSeconds()}`,a=Object(s["a"])(`news-crawler-storage-export-${l}.csv`,e,"text/csv");!0!==a&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},mounted(){}},u=c,p=l("2877"),m=l("9989"),d=l("0378"),b=l("27f9"),f=l("0016"),g=l("9c40"),h=l("7ea5"),w=l("eaac"),v=l("eebe"),x=l.n(v),k=Object(p["a"])(u,a,n,!1,null,null,null);t["default"]=k.exports;x()(k,"components",{QPage:m["a"],QForm:d["a"],QInput:b["a"],QIcon:f["a"],QBtn:g["a"],QAjaxBar:h["a"],QTable:w["a"]})}}]);