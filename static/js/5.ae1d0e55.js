(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"887c":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("q-page",{},[l("div",{staticStyle:{"max-width":"900px","margin-left":"auto","margin-right":"auto"}},[l("div",{staticStyle:{height:"50px"}}),l("div",{staticClass:"q-ma-md"},[l("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[l("q-input",{attrs:{label:"News Name 報刊名稱",placeholder:""},scopedSlots:e._u([0!==e.nameNews.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.nameNews=""}}})]},proxy:!0}:null],null,!0),model:{value:e.nameNews,callback:function(t){e.nameNews=t},expression:"nameNews"}}),l("q-input",{attrs:{label:"Title 報道標題 可使用正則表達式「Regex Available」",placeholder:""},scopedSlots:e._u([0!==e.title.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.title=""}}})]},proxy:!0}:null],null,!0),model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),l("q-input",{attrs:{label:"Content 報道正文 可使用正則表達式「Regex Available」",placeholder:""},scopedSlots:e._u([0!==e.content.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.content=""}}})]},proxy:!0}:null],null,!0),model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),l("q-input",{attrs:{label:"Locale 報道區域",placeholder:""},scopedSlots:e._u([0!==e.locale.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.locale=""}}})]},proxy:!0}:null],null,!0),model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}}),l("div",[l("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary",disable:e.isSubmitDisabled}}),l("q-ajax-bar",{ref:"bar",attrs:{position:"bottom",color:"primary",size:"10px","skip-hijack":""}})],1)],1)],1),e.isResultShow?l("div",{staticClass:"q-ma-md"},[l("q-table",{attrs:{title:"Result Data",dense:"",data:e.resultData,columns:e.resultColumns,"visible-columns":e.visibleColumns,"row-key":"link-href"},scopedSlots:e._u([{key:"top-right",fn:function(){return[l("div",{staticClass:"row"},[l("div",{staticClass:"col"},[l("q-item-label",{attrs:{header:""}},[e._v("Select Output / Display columns Below")]),l("q-toggle",{attrs:{val:"date",label:"Date"},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}}),l("q-toggle",{attrs:{val:"name",label:"News Name"},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}}),l("q-toggle",{attrs:{val:"locale",label:"Locale"},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}}),l("q-toggle",{attrs:{val:"description",label:"Description"},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}}),l("q-toggle",{attrs:{val:"title",label:"Title"},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}}),l("q-toggle",{attrs:{val:"content",label:"Content"},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}}),l("q-toggle",{attrs:{val:"url",label:"Url"},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}})],1),l("div",{staticClass:"col-5"},[l("q-item-label",{staticClass:"q-gutter-xs",attrs:{header:""}},[e._v("Select Output Type")]),l("q-btn-toggle",{attrs:{"no-caps":"",rounded:"","toggle-color":"green",color:"white","text-color":"primary",options:[{label:"CSV",value:"csv"},{label:"TEXT",value:"txt"}]},model:{value:e.outputType,callback:function(t){e.outputType=t},expression:"outputType"}}),l("div",{staticClass:"q-gutter-lg"},[l("q-input",{attrs:{label:"導出條目限制 if 0 output all",placeholder:"0"},model:{value:e.outputlimit,callback:function(t){e.outputlimit=t},expression:"outputlimit"}}),l("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":""},on:{click:e.exportTable}}),e.isShowProgress?l("q-circular-progress",{attrs:{"show-value":"","font-size":"14px",value:e.progress,size:"40px",thickness:.32,color:"teal","track-color":"grey-3"}}):e._e()],1)],1)])]},proxy:!0}],null,!1,548042795)})],1):e._e()])])},s=[],o=(l("a434"),l("c973")),n=l.n(o),i=l("a357"),r=l("c4e3"),c=l.n(r);const u=(e,t)=>{let l=void 0!==t?t(e):e;return l=void 0===l||null===l?"":String(l),l=l.split('"').join('""'),`"${l}"`};var p={data(){return{nameNews:"",title:"",content:"",locale:"",outputlimit:0,isSubmitDisabled:!1,isResultShow:!1,resultData:[],outputType:"csv",progress:0,isShowProgress:!1,visibleColumns:["date","name","locale","description","title","content","url"],resultColumns:[{name:"date",label:"Date",align:"left",field:"date",sortable:!0},{name:"name",label:"News Name",align:"left",field:"name",sortable:!0},{name:"locale",label:"Locale",align:"left",field:"locale",sortable:!0},{name:"description",label:"Description",align:"left",field:"description",sortable:!0},{name:"title",label:"Title",align:"left",field:"title",sortable:!0},{name:"content",label:"Content",align:"left",field:"content",sortable:!0},{name:"url",label:"Url",align:"left",field:"url",sortable:!1}]}},methods:{onSubmit(){var e=this;return n()((function*(){console.info("[methods][onSubmit]");const t=e.$refs.bar;e.isSubmitDisabled=!0,t.start(),yield e.$http.get("/newsData",{params:{name:e.nameNews,title:e.title,content:e.content,locale:e.locale}}).then(l=>{"[]"===l.data?console.error("error"):(t.stop(),e.isSubmitDisabled=!1,e.isResultShow=!0,e.resultData=l.data)})}))()},exportTable(){this.isShowProgress=!0;const e=new c.a,t=[this.visibleColumns.map(e=>u(e))],l=this.resultData.map(e=>this.visibleColumns.map(t=>u(e[t])).join(",")),a=l.length,s=new Date,o=`${s.getFullYear()}${s.getMonth()}${s.getDate()}-${s.getHours()}${s.getMinutes()}${s.getSeconds()}`;let n=0;const r=Math.floor(a/this.outputlimit);while(l.length>0){let a=l.splice(0,r);switch(this.outputType){case"csv":a=t.concat(a).join("\r\n");break;case"txt":a=a.join("\r\n");break;default:a=t.concat(a).join("\r\n");break}e.file(`news-data-${n++}-${o}.`+this.outputType,a),this.progress=80*(1-l.length/this.resultData.length).toFixed(2)}this.progress=90,e.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:5}}).then(e=>{const t=Object(i["a"])(`news-crawler-storage-export-${o}.zip`,e,"blob");this.progress=100,setTimeout(()=>{this.isShowProgress=!1},2e3),!0!==t&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})})}},mounted(){}},m=p,b=l("2877"),d=l("9989"),g=l("0378"),v=l("27f9"),f=l("0016"),h=l("9c40"),C=l("7ea5"),w=l("eaac"),x=l("0170"),k=l("9564"),q=l("6a67"),y=l("58ea"),S=l("eebe"),D=l.n(S),T=Object(b["a"])(m,a,s,!1,null,null,null);t["default"]=T.exports;D()(T,"components",{QPage:d["a"],QForm:g["a"],QInput:v["a"],QIcon:f["a"],QBtn:h["a"],QAjaxBar:C["a"],QTable:w["a"],QItemLabel:x["a"],QToggle:k["a"],QBtnToggle:q["a"],QCircularProgress:y["a"]})}}]);