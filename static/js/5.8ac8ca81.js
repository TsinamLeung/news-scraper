(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"887c":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("q-page",{},[l("div",{staticStyle:{"max-width":"900px","margin-left":"auto","margin-right":"auto"}},[l("div",{staticStyle:{height:"50px"}}),l("div",{staticClass:"q-ma-md"},[l("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[l("q-input",{attrs:{label:"News Name 報刊名稱",placeholder:""},scopedSlots:e._u([0!==e.nameNews.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.nameNews=""}}})]},proxy:!0}:null],null,!0),model:{value:e.nameNews,callback:function(t){e.nameNews=t},expression:"nameNews"}}),l("q-input",{attrs:{label:"Title 報道標題 可使用正則表達式「Regex Available」",placeholder:""},scopedSlots:e._u([0!==e.title.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.title=""}}})]},proxy:!0}:null],null,!0),model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),l("q-input",{attrs:{label:"Content 報道正文 可使用正則表達式「Regex Available」",placeholder:""},scopedSlots:e._u([0!==e.content.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.content=""}}})]},proxy:!0}:null],null,!0),model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),l("q-input",{attrs:{label:"Locale 報道區域",placeholder:""},scopedSlots:e._u([0!==e.locale.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.locale=""}}})]},proxy:!0}:null],null,!0),model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}}),l("div",[l("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary",disable:e.isSubmitDisabled}}),l("q-ajax-bar",{ref:"bar",attrs:{position:"bottom",color:"primary",size:"10px","skip-hijack":""}})],1)],1)],1),e.isResultShow?l("div",{staticClass:"q-ma-md"},[l("q-table",{attrs:{title:"Result Data",dense:"",data:e.resultData,columns:e.resultColumns,"row-key":"link-href"},scopedSlots:e._u([{key:"top-right",fn:function(){return[l("q-input",{attrs:{label:"導出條目限制 if 0 output all",placeholder:"0"},model:{value:e.outputlimit,callback:function(t){e.outputlimit=t},expression:"outputlimit"}}),l("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":""},on:{click:e.exportTable}})]},proxy:!0}],null,!1,2917739354)})],1):e._e()])])},n=[],o=l("c973"),i=l.n(o),s=l("a357"),r=l("c4e3"),c=l.n(r);const u=(e,t)=>{let l=void 0!==t?t(e):e;return l=void 0===l||null===l?"":String(l),l=l.split('"').join('""'),`"${l}"`};var p={data(){return{nameNews:"",title:"",content:"",locale:"",outputlimit:0,isSubmitDisabled:!1,isResultShow:!1,resultData:[],resultColumns:[{name:"date",label:"Date",align:"left",field:"date",sortable:!0},{name:"name",label:"News Name",align:"left",field:"name",sortable:!0},{name:"locale",label:"Locale",align:"left",field:"locale",sortable:!0},{name:"description",label:"Description",align:"left",field:"description",sortable:!0},{name:"title",label:"Title",align:"left",field:"title",sortable:!0},{name:"content",label:"Content",align:"left",field:"content",sortable:!0},{name:"url",label:"Url",align:"left",field:"url",sortable:!1}]}},methods:{onSubmit(){var e=this;return i()((function*(){console.info("[methods][onSubmit]");const t=e.$refs.bar;e.isSubmitDisabled=!0,t.start(),yield e.$http.get("/newsData",{params:{name:e.nameNews,title:e.title,content:e.content,locale:e.locale}}).then(l=>{"[]"===l.data?console.error("error"):(t.stop(),e.isSubmitDisabled=!1,e.isResultShow=!0,e.resultData=l.data)})}))()},exportTable(){const e=new c.a,t=[this.resultColumns.map(e=>u(e.label))],l=this.resultData.map(e=>this.resultColumns.map(t=>u("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format)).join(",")),a=l.length,n=new Date,o=`${n.getFullYear()}${n.getMonth()}${n.getDate()}-${n.getHours()}${n.getMinutes()}${n.getSeconds()}`;let i=0;while(l.length>0){let n=[];for(let e=0;l.length>0&&e<Math.floor(a/this.outputlimit);++e)n.push(l.shift());n=t.concat(n).join("\r\n"),e.file(`news-data-${i++}-${o}.csv`,n)}e.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}).then(e=>{const t=Object(s["a"])(`news-crawler-storage-export-${o}.zip`,e,"blob");!0!==t&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})})}},mounted(){}},m=p,d=l("2877"),b=l("9989"),f=l("0378"),h=l("27f9"),g=l("0016"),w=l("9c40"),v=l("7ea5"),x=l("eaac"),y=l("eebe"),k=l.n(y),S=Object(d["a"])(m,a,n,!1,null,null,null);t["default"]=S.exports;k()(S,"components",{QPage:b["a"],QForm:f["a"],QInput:h["a"],QIcon:g["a"],QBtn:w["a"],QAjaxBar:v["a"],QTable:x["a"]})}}]);