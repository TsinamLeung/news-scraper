(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"887c":function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("q-page",{},[l("div",{staticStyle:{"max-width":"900px","margin-left":"auto","margin-right":"auto"}},[l("div",{staticStyle:{height:"50px"}}),l("div",{staticClass:"q-ma-md"},[l("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit}},[l("q-input",{attrs:{label:"News Name 報刊名稱",placeholder:""},scopedSlots:t._u([0!==t.nameNews.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){t.nameNews=""}}})]},proxy:!0}:null],null,!0),model:{value:t.nameNews,callback:function(e){t.nameNews=e},expression:"nameNews"}}),l("q-input",{attrs:{label:"Title 報道標題 可使用正則表達式「Regex Available」",placeholder:""},scopedSlots:t._u([0!==t.title.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){t.title=""}}})]},proxy:!0}:null],null,!0),model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),l("q-input",{attrs:{label:"Content 報道正文 可使用正則表達式「Regex Available」",placeholder:""},scopedSlots:t._u([0!==t.content.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){t.content=""}}})]},proxy:!0}:null],null,!0),model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),l("q-input",{attrs:{label:"Locale 報道區域",placeholder:""},scopedSlots:t._u([0!==t.locale.length?{key:"append",fn:function(){return[l("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){t.locale=""}}})]},proxy:!0}:null],null,!0),model:{value:t.locale,callback:function(e){t.locale=e},expression:"locale"}}),l("div",[l("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary",disable:t.isSubmitDisabled}}),l("q-ajax-bar",{ref:"bar",attrs:{position:"bottom",color:"primary",size:"10px","skip-hijack":""}})],1)],1)],1),t.isResultShow?l("div",{staticClass:"q-ma-md"},[l("q-table",{attrs:{title:"Result Data",dense:"",data:t.resultData,columns:t.resultColumns,"row-key":"link-href"},scopedSlots:t._u([{key:"top-right",fn:function(){return[l("q-input",{attrs:{label:"導出條目限制 if 0 output all",placeholder:"0"},model:{value:t.outputlimit,callback:function(e){t.outputlimit=e},expression:"outputlimit"}}),l("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":""},on:{click:t.exportTable}})]},proxy:!0}],null,!1,2917739354)})],1):t._e()])])},n=[],o=l("c973"),i=l.n(o),s=l("a357");const r=(t,e)=>{let l=void 0!==e?e(t):t;return l=void 0===l||null===l?"":String(l),l=l.split('"').join('""'),`"${l}"`};var c={data(){return{nameNews:"",title:"",content:"",locale:"",outputlimit:0,isSubmitDisabled:!1,isResultShow:!1,resultData:[],resultColumns:[{name:"date",label:"Date",align:"left",field:"date",sortable:!0},{name:"name",label:"News Name",align:"left",field:"name",sortable:!0},{name:"locale",label:"Locale",align:"left",field:"locale",sortable:!0},{name:"description",label:"Description",align:"left",field:"description",sortable:!0},{name:"title",label:"Title",align:"left",field:"title",sortable:!0},{name:"content",label:"Content",align:"left",field:"content",sortable:!0},{name:"url",label:"Url",align:"left",field:"url",sortable:!1}]}},methods:{onSubmit(){var t=this;return i()((function*(){console.info("[methods][onSubmit]");const e=t.$refs.bar;t.isSubmitDisabled=!0,e.start(),yield t.$http.get("/newsData",{params:{name:t.nameNews,title:t.title,content:t.content,locale:t.locale}}).then(l=>{"[]"===l.data?console.error("error"):(e.stop(),t.isSubmitDisabled=!1,t.isResultShow=!0,t.resultData=l.data)})}))()},exportTable(){const t=[this.resultColumns.map(t=>r(t.label))],e=this.resultData.map(t=>this.resultColumns.map(e=>r("function"===typeof e.field?e.field(t):t[void 0===e.field?e.name:e.field],e.format)).join(",")),l=e.length,a=new Date,n=`${a.getFullYear()}${a.getMonth()}${a.getDate()}-${a.getHours()}${a.getMinutes()}${a.getSeconds()}`;let o=0;while(e.length>0){let a=[];for(let t=0;e.length>0&&t<Math.floor(l/this.outputlimit);++t)a.push(e.shift());a=0===this.outputlimit?t.concat(e).join("\r\n"):t.concat(a).join("\r\n");const i=Object(s["a"])(`news-crawler-storage-export-${o++}-${n}.csv`,a,"text/csv");if(!0!==i&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"}),0===this.outputlimit)break}}},mounted(){}},u=c,p=l("2877"),m=l("9989"),d=l("0378"),b=l("27f9"),f=l("0016"),h=l("9c40"),g=l("7ea5"),w=l("eaac"),v=l("eebe"),x=l.n(v),k=Object(p["a"])(u,a,n,!1,null,null,null);e["default"]=k.exports;x()(k,"components",{QPage:m["a"],QForm:d["a"],QInput:b["a"],QIcon:f["a"],QBtn:h["a"],QAjaxBar:g["a"],QTable:w["a"]})}}]);